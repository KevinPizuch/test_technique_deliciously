(this.webpackJsonptest_technique_deliciously=this.webpackJsonptest_technique_deliciously||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(13),c=a.n(n),r=a(38),l=(a(57),a(58),a(9)),i=a(12),o=a(32),d=a.n(o),j="http://localhost:8080/api/auth/",b=function(e,t){return d.a.post(j+"signup",{username:e,password:t})},u=function(e,t){return d.a.post(j+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},m=function(){localStorage.removeItem("user")},O=function(){return JSON.parse(localStorage.getItem("user"))},h=a(10),x=a(25),p=a.n(x),v=a(36),f=a.n(v),g=a(30),N=a(37),y=a.n(N),w=a(1),S=function(e){if(!e)return Object(w.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})};var C=function(e){var t=Object(s.useRef)(),a=Object(s.useRef)(),n=Object(s.useState)(""),c=Object(l.a)(n,2),r=c[0],o=c[1],d=Object(s.useState)(""),j=Object(l.a)(d,2),b=j[0],m=j[1],O=Object(s.useState)(!1),x=Object(l.a)(O,2),v=x[0],N=x[1],C=Object(s.useState)(""),k=Object(l.a)(C,2),F=k[0],_=k[1],R=Object(i.f)();return Object(w.jsx)(g.a,Object(h.a)(Object(h.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(w.jsx)(g.a.Body,{children:Object(w.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),_(""),N(!0),t.current.validateAll(),0===a.current.context._errors.length?u(r,b).then((function(){R.push("/home"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();N(!1),_(t)})):N(!1)},ref:t,className:"modal-form",children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"username",children:"Username"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var t=e.target.value;o(t)},validations:[S]})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)(p.a,{type:"password",className:"form-control",name:"password",value:b,onChange:function(e){var t=e.target.value;m(t)},validations:[S]})]}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsxs)("button",{className:"btn btn-primary btn-block",disabled:v,children:[v&&Object(w.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(w.jsx)("span",{children:"Log In"})]})}),F&&Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("div",{className:"alert alert-danger",role:"alert",children:F})}),Object(w.jsx)(f.a,{style:{display:"none"},ref:a})]})})}))},k=function(e){if(!e)return Object(w.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},F=function(e){if(e.length<3||e.length>20)return Object(w.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},_=function(e){if(e.length<3||e.length>40)return Object(w.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 3 and 40 characters."})},R=function(e){var t=Object(s.useRef)(),a=Object(s.useRef)(),n=Object(s.useState)(""),c=Object(l.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(""),d=Object(l.a)(o,2),j=d[0],u=d[1],m=Object(s.useState)(!1),O=Object(l.a)(m,2),x=O[0],v=O[1],N=Object(s.useState)(""),S=Object(l.a)(N,2),C=S[0],R=S[1];return Object(w.jsx)(g.a,Object(h.a)(Object(h.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(w.jsx)(g.a.Body,{children:Object(w.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),R(""),v(!1),t.current.validateAll(),0===a.current.context._errors.length&&b(r,j).then((function(e){R(e.data.message),v(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();R(t),v(!1)}))},ref:t,className:"modal-form",children:[!x&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"username",children:"Username"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"username",value:r,onChange:function(e){var t=e.target.value;i(t)},validations:[k,F]})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)(p.a,{type:"password",className:"form-control",name:"password",value:j,onChange:function(e){var t=e.target.value;u(t)},validations:[k,_]})]}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),C&&Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("div",{className:x?"alert alert-success":"alert alert-danger",role:"alert",children:C})}),Object(w.jsx)(f.a,{style:{display:"none"},ref:a})]})})}))},T="http://localhost:8080/image?name=",A=function(e){return Object(w.jsx)(g.a,Object(h.a)(Object(h.a)({dialogClassName:"modal-container"},e),{},{centered:!0,children:e.data&&Object(w.jsxs)(g.a.Body,{children:[Object(w.jsx)("button",{onClick:e.onHide,type:"button",className:"close",children:"\xd7"}),Object(w.jsx)("div",{className:"modal-restaurant-img",children:Object(w.jsx)("img",{src:T+e.data.mainPicture,alt:e.data.name})}),Object(w.jsxs)("div",{className:"modal-restaurant-name-category",children:[Object(w.jsx)("h4",{children:e.data.name}),Object(w.jsx)("p",{children:e.data.type})]}),Object(w.jsxs)("div",{className:"modal-restaurant-adress-town",children:[Object(w.jsx)("p",{children:e.data.adress}),Object(w.jsxs)("p",{children:[e.data.town,"."]})]}),Object(w.jsxs)("div",{className:"modal-restaurant-details",children:[e.data.details.split(",").map((function(e){return Object(w.jsxs)("div",{className:"modal-restaurant-details-icons",children:[Object(w.jsx)("div",{className:"modal-restaurant-details-icons-wrapper",id:"France"===e?"country":null,children:Object(w.jsx)("img",{src:"".concat(T+e.split(" ").join("_").toLowerCase(),".svg"),alt:e})}),Object(w.jsx)("p",{children:e})]},e)})),Object(w.jsxs)("div",{className:"modal-restaurant-details-icons",children:[Object(w.jsx)("div",{className:"modal-restaurant-details-icons-wrapper",children:Object(w.jsx)("img",{src:e.data.price<=15?T+"smallprice.svg":T+"midprice.svg",alt:e.data.price})}),e.data.price<=15?Object(w.jsx)("p",{children:"Moins de 15\u20ac"}):Object(w.jsx)("p",{children:"Entre 30\u20ac et 50\u20ac"})]})]})]})}))},B="http://localhost:8080/",E=function(){return d.a.get(B+"restaurants")},I=function(){return d.a.get(B+"restaurants/names")},L=function(e){return d.a.get(B+"restaurants/name?name=".concat(e))},P=function(e){return d.a.post(B+"updateRestaurant",e).then((function(e){return e.data}))},q=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),r=Object(l.a)(c,2),i=r[0],o=r[1],d=Object(s.useState)(null),j=Object(l.a)(d,2),b=j[0],u=j[1],m=Object(s.useState)(null),O=Object(l.a)(m,2),h=O[0],x=O[1],p=function(e){x(b[e]),o(!0),n(!0)};return Object(s.useEffect)((function(){E().then((function(e){u(e.data)}))}),[]),Object(w.jsxs)("section",{children:[Object(w.jsx)("div",{className:"body-main",children:Object(w.jsxs)("div",{className:"body-main-container",children:[Object(w.jsx)("div",{children:Object(w.jsx)("button",{className:"body-container-button",onClick:function(){return p(0)},children:"Bouton"})}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{className:"body-container-button",onClick:function(){return p(1)},children:"Bouton"})})]})}),i&&Object(w.jsx)(A,{show:a,onHide:function(){return n(!1)},data:h})]})},D=a(119),H=a(35),J="http://localhost:8080/image?name=",U=D.a.Dragger,M=function(e){if(!e)return Object(w.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},z=function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(l.a)(c,2),i=r[0],o=r[1],d=Object(s.useState)(!1),j=Object(l.a)(d,2),b=j[0],u=j[1],m=Object(s.useRef)(),O=Object(s.useRef)(),x={name:"photo",multiple:!1,action:"http://localhost:8080/photo",onChange:function(e){var t=e.file.status;"done"===t?(H.a.success("".concat(e.file.name," file uploaded successfully."),2e3),o(Object(h.a)(Object(h.a)({},i),{},{mainPicture:e.file.name}))):"error"===t&&H.a.fail("".concat(e.file.name," file upload failed."),2e3)}};return Object(s.useEffect)((function(){I().then((function(e){n(e.data)}))}),[]),Object(w.jsxs)("div",{className:"board-admin-container",children:[Object(w.jsxs)("div",{className:"board-admin-restaurant-list",children:[Object(w.jsx)("div",{className:"board-admin-restaurant-title",children:Object(w.jsx)("h3",{children:"Restaurants"})}),Object(w.jsx)("div",{children:a&&a.map((function(e){return Object(w.jsx)("div",{className:"board-admin-restaurant-list-content",children:Object(w.jsx)("p",{onClick:function(){return t=e.name,void L(t).then((function(e){o(e.data)}));var t},children:e.name})},e.name)}))})]}),Object(w.jsx)("div",{className:"board-admin-restaurant-content",children:i&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"board-admin-restaurant-content-modify",children:Object(w.jsxs)(y.a,{className:"modal-form",ref:m,onSubmit:function(e){e.preventDefault(),u(!0),m.current.validateAll(),0===O.current.context._errors.length?(H.a.loading("Loading..."),P(i).then((function(){I().then((function(e){n(e.data)})),u(!1),H.a.hide(),H.a.success("Success !",2e3)}),(function(e){console.log(e.response),u(!1)}))):(H.a.hide(),u(!1))},children:[Object(w.jsx)(U,Object(h.a)(Object(h.a)({},x),{},{children:Object(w.jsx)("div",{style:{width:"80%",height:"100px",margin:"auto",backgroundColor:"lightgray"},children:Object(w.jsx)("p",{className:"ant-upload-text",style:{textAlign:"center"},children:"Click or drag image to this area to upload"})})})),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"name",children:"Name"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"name",value:i.name,onChange:function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},i),{},{name:t}))},validations:[M]})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"type",children:"Type"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"type",value:i.type,onChange:function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},i),{},{type:t}))},validations:[M]})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"adress",children:"Adress"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"adress",value:i.adress,onChange:function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},i),{},{adress:t}))},validations:[M]})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"town",children:"Town"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"town",value:i.town,onChange:function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},i),{},{town:t}))},validations:[M]})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"price",children:"Price"}),Object(w.jsx)(p.a,{type:"text",className:"form-control",name:"price",value:i.price,onChange:function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},i),{},{price:t}))},validations:[M]})]}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsxs)("button",{className:"btn btn-primary btn-block",disabled:b,children:[b&&Object(w.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(w.jsx)("span",{children:"Confirm changes"})]})}),Object(w.jsx)(f.a,{style:{display:"none"},ref:O})]})}),Object(w.jsxs)("div",{className:"board-admin-restaurant-content-preview",children:[Object(w.jsx)("div",{className:"modal-restaurant-img",children:Object(w.jsx)("img",{src:J+i.mainPicture,alt:i.name})}),Object(w.jsxs)("div",{className:"board-admin-restaurant-wrapper-preview",children:[Object(w.jsxs)("div",{className:"modal-restaurant-name-category",children:[Object(w.jsx)("h4",{children:i.name}),Object(w.jsx)("p",{children:i.type})]}),Object(w.jsxs)("div",{className:"modal-restaurant-adress-town",children:[Object(w.jsx)("p",{children:i.adress}),Object(w.jsxs)("p",{children:[i.town,"."]})]}),Object(w.jsxs)("div",{className:"modal-restaurant-details",children:[i.details.split(",").map((function(e){return Object(w.jsxs)("div",{className:"modal-restaurant-details-icons",children:[Object(w.jsx)("div",{className:"modal-restaurant-details-icons-wrapper",id:"France"===e?"country":null,children:Object(w.jsx)("img",{src:"".concat(J+e.split(" ").join("_").toLowerCase(),".svg"),alt:e})}),Object(w.jsx)("p",{children:e})]},e)})),Object(w.jsxs)("div",{className:"modal-restaurant-details-icons",children:[Object(w.jsx)("div",{className:"modal-restaurant-details-icons-wrapper",children:Object(w.jsx)("img",{src:i.price<=15?J+"smallprice.svg":J+"midprice.svg",alt:i.price})}),i.price<=15?Object(w.jsx)("p",{children:"Moins de 15\u20ac"}):Object(w.jsx)("p",{children:"Entre 30\u20ac et 50\u20ac"})]})]})]})]})]})})]})},G=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(void 0),o=Object(l.a)(c,2),d=o[0],j=o[1],b=Object(s.useState)(!1),u=Object(l.a)(b,2),h=u[0],x=u[1],p=Object(s.useState)(!1),v=Object(l.a)(p,2),f=v[0],g=v[1];Object(s.useEffect)((function(){var e=O();e&&(j(e),n(e.roles.includes("ROLE_ADMIN")))}),[]);return Object(w.jsxs)("div",{children:[Object(w.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(w.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(r.b,{to:"/home",className:"nav-link",children:"Home"})}),a&&Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)(r.b,{to:"/admin",className:"nav-link",children:"Admin Board"})})]}),d?Object(w.jsx)("div",{className:"navbar-nav ml-auto",children:Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)("a",{href:"/home",className:"nav-link",onClick:function(){m()},children:"LogOut"})})}):Object(w.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)("p",{className:"nav-link",onClick:function(){return x(!0)},children:"Log In"})}),Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)("p",{className:"nav-link",onClick:function(){return g(!0)},children:"Sign Up"})})]})]}),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(i.c,{children:[Object(w.jsx)(i.a,{exact:!0,path:["/","/home"],component:q}),Object(w.jsx)(i.a,{path:"/admin",component:z})]})}),Object(w.jsx)(C,{show:h,onHide:function(){return x(!1)}}),Object(w.jsx)(R,{show:f,onHide:function(){return g(!1)}})]})};c.a.render(Object(w.jsx)(r.a,{children:Object(w.jsx)(G,{})}),document.getElementById("root"))},58:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.ceefc9eb.chunk.js.map