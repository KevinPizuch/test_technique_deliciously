{"ast":null,"code":"import _objectSpread from\"/home/ryzz/test_technique_deliciously/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ryzz/test_technique_deliciously/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import Input from\"react-validation/build/input\";import CheckButton from\"react-validation/build/button\";import Modal from'react-bootstrap/Modal';import Form from\"react-validation/build/form\";import AuthService from\"../services/auth.service\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var required=function required(value){if(!value){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"This field is required!\"});}};function Login(props){var form=useRef();var checkBtn=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var history=useHistory();var onChangeUsername=function onChangeUsername(e){var username=e.target.value;setUsername(username);};var onChangePassword=function onChangePassword(e){var password=e.target.value;setPassword(password);};var handleLogin=function handleLogin(e){e.preventDefault();setMessage(\"\");setLoading(true);form.current.validateAll();if(checkBtn.current.context._errors.length===0){AuthService.login(username,password).then(function(){history.push(\"/home\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setLoading(false);setMessage(resMessage);});}else{setLoading(false);}};return/*#__PURE__*/_jsx(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogin,ref:form,className:\"modal-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"username\",value:username,onChange:onChangeUsername,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",className:\"form-control\",name:\"password\",value:password,onChange:onChangePassword,validations:[required]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Log In\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message})}),/*#__PURE__*/_jsx(CheckButton,{style:{display:\"none\"},ref:checkBtn})]})})}));}export default Login;","map":{"version":3,"sources":["/home/ryzz/test_technique_deliciously/client/src/components/LoginModal.js"],"names":["React","useState","useRef","Input","CheckButton","Modal","Form","AuthService","useHistory","required","value","Login","props","form","checkBtn","username","setUsername","password","setPassword","loading","setLoading","message","setMessage","history","onChangeUsername","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","login","then","push","window","location","reload","error","resMessage","response","data","toString","display"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport Modal from 'react-bootstrap/Modal';\nimport Form from \"react-validation/build/form\";\nimport AuthService from \"../services/auth.service\";\nimport {\n  useHistory,\n} from \"react-router-dom\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\n\nfunction Login(props) {\n  const form = useRef();\n  const checkBtn = useRef();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  let history = useHistory();\n\n  const onChangeUsername = (e) => {\n    const username = e.target.value;\n    setUsername(username);\n  };\n\n  const onChangePassword = (e) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    setMessage(\"\");\n    setLoading(true);\n\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      AuthService.login(username, password).then(\n        () => {\n          history.push(\"/home\");\n          window.location.reload();\n        },\n        (error) => {\n          const resMessage =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString();\n\n          setLoading(false);\n          setMessage(resMessage);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Body>\n      <Form onSubmit={handleLogin} ref={form} className=\"modal-form\">\n           <div className=\"form-group\">\n             <label htmlFor=\"username\">Username</label>\n            <Input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"username\"\n              value={username}\n              onChange={onChangeUsername}\n              validations={[required]}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <Input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              value={password}\n              onChange={onChangePassword}\n              validations={[required]}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <button className=\"btn btn-primary btn-block\" disabled={loading}>\n              {loading && (\n                <span className=\"spinner-border spinner-border-sm\"></span>\n              )}\n              <span>Log In</span>\n            </button>\n          </div>\n\n          {message && (\n            <div className=\"form-group\">\n              <div className=\"alert alert-danger\" role=\"alert\">\n                {message}\n              </div>\n            </div>\n          )}\n          <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n        </Form>\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}