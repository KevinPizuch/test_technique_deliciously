{"ast":null,"code":"import _objectSpread from\"/home/ryzz/test_technique_deliciously/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ryzz/test_technique_deliciously/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import Input from\"react-validation/build/input\";import CheckButton from\"react-validation/build/button\";import Form from\"react-validation/build/form\";import{Upload}from'antd';import DataService from\"../services/data.service\";import Toast from'light-toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var IMG_URL=\"http://localhost:8080/image?name=\";var Dragger=Upload.Dragger;var required=function required(value){if(!value){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"This field is required!\"});}};var BoardAdmin=function BoardAdmin(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),restaurantsNamesData=_useState2[0],setRestaurantsNamesData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),restaurantContent=_useState4[0],setRestaurantContent=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var form=useRef();var checkBtn=useRef();var props={name:'photo',multiple:false,action:'http://localhost:8080/photo',onChange:function onChange(info){var status=info.file.status;if(status==='done'){Toast.success(\"\".concat(info.file.name,\" file uploaded successfully.\"),2000);setRestaurantContent(_objectSpread(_objectSpread({},restaurantContent),{},{mainPicture:info.file.name}));}else if(status==='error'){Toast.fail(\"\".concat(info.file.name,\" file upload failed.\"),2000);}}};var getRestaurantContent=function getRestaurantContent(name){DataService.getRestaurantContent(name).then(function(response){setRestaurantContent(response.data);});};var onChangeName=function onChangeName(e){var name=e.target.value;setRestaurantContent(_objectSpread(_objectSpread({},restaurantContent),{},{name:name}));};var onChangeType=function onChangeType(e){var type=e.target.value;setRestaurantContent(_objectSpread(_objectSpread({},restaurantContent),{},{type:type}));};var onChangeAdress=function onChangeAdress(e){var adress=e.target.value;setRestaurantContent(_objectSpread(_objectSpread({},restaurantContent),{},{adress:adress}));};var onChangeTown=function onChangeTown(e){var town=e.target.value;setRestaurantContent(_objectSpread(_objectSpread({},restaurantContent),{},{town:town}));};var onChangePrice=function onChangePrice(e){var price=e.target.value;setRestaurantContent(_objectSpread(_objectSpread({},restaurantContent),{},{price:price}));};var handleModify=function handleModify(e){e.preventDefault();setLoading(true);form.current.validateAll();if(checkBtn.current.context._errors.length===0){Toast.loading(\"Loading...\");DataService.updateRestaurant(restaurantContent).then(function(){DataService.getAllRestaurantName().then(function(response){setRestaurantsNamesData(response.data);});setLoading(false);Toast.hide();Toast.success(\"Success !\",2000);},function(error){console.log(error.response);setLoading(false);});}else{Toast.hide();setLoading(false);}};useEffect(function(){DataService.getAllRestaurantName().then(function(response){setRestaurantsNamesData(response.data);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"board-admin-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"board-admin-restaurant-list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"board-admin-restaurant-title\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Restaurants\"})}),/*#__PURE__*/_jsx(\"div\",{children:restaurantsNamesData&&restaurantsNamesData.map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"board-admin-restaurant-list-content\",children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return getRestaurantContent(item.name);},children:item.name})},item.name);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"board-admin-restaurant-content\",children:restaurantContent&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"board-admin-restaurant-content-modify\",children:/*#__PURE__*/_jsxs(Form,{className:\"modal-form\",ref:form,onSubmit:handleModify,children:[/*#__PURE__*/_jsx(Dragger,_objectSpread(_objectSpread({},props),{},{children:/*#__PURE__*/_jsx(\"div\",{style:{width:'80%',height:'100px',margin:'auto',backgroundColor:'lightgray'},children:/*#__PURE__*/_jsx(\"p\",{className:\"ant-upload-text\",style:{textAlign:'center'},children:\"Click or drag image to this area to upload\"})})})),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"name\",value:restaurantContent.name,onChange:onChangeName,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",children:\"Type\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"type\",value:restaurantContent.type,onChange:onChangeType,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adress\",children:\"Adress\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"adress\",value:restaurantContent.adress,onChange:onChangeAdress,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"town\",children:\"Town\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"town\",value:restaurantContent.town,onChange:onChangeTown,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"price\",value:restaurantContent.price,onChange:onChangePrice,validations:[required]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Confirm changes\"})]})}),/*#__PURE__*/_jsx(CheckButton,{style:{display:\"none\"},ref:checkBtn})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-admin-restaurant-content-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-restaurant-img\",children:/*#__PURE__*/_jsx(\"img\",{src:IMG_URL+restaurantContent.mainPicture,alt:restaurantContent.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-admin-restaurant-wrapper-preview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-restaurant-name-category\",children:[/*#__PURE__*/_jsx(\"h4\",{children:restaurantContent.name}),/*#__PURE__*/_jsx(\"p\",{children:restaurantContent.type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-restaurant-adress-town\",children:[/*#__PURE__*/_jsx(\"p\",{children:restaurantContent.adress}),/*#__PURE__*/_jsxs(\"p\",{children:[restaurantContent.town,\".\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-restaurant-details\",children:[restaurantContent.details.split(',').map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-restaurant-details-icons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-restaurant-details-icons-wrapper\",id:item===\"France\"?\"country\":null,children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(IMG_URL+item.split(' ').join('_').toLowerCase(),\".svg\"),alt:item})}),/*#__PURE__*/_jsx(\"p\",{children:item})]},item);}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-restaurant-details-icons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-restaurant-details-icons-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:restaurantContent.price<=15?IMG_URL+\"smallprice.svg\":IMG_URL+\"midprice.svg\",alt:restaurantContent.price})}),restaurantContent.price<=15?/*#__PURE__*/_jsx(\"p\",{children:\"Moins de 15\\u20AC\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Entre 30\\u20AC et 50\\u20AC\"})]})]})]})]})]})})]});};export default BoardAdmin;","map":{"version":3,"sources":["/home/ryzz/test_technique_deliciously/client/src/components/BoardAdmin.js"],"names":["React","useState","useEffect","useRef","Input","CheckButton","Form","Upload","DataService","Toast","IMG_URL","Dragger","required","value","BoardAdmin","restaurantsNamesData","setRestaurantsNamesData","restaurantContent","setRestaurantContent","loading","setLoading","form","checkBtn","props","name","multiple","action","onChange","info","status","file","success","mainPicture","fail","getRestaurantContent","then","response","data","onChangeName","e","target","onChangeType","type","onChangeAdress","adress","onChangeTown","town","onChangePrice","price","handleModify","preventDefault","current","validateAll","context","_errors","length","updateRestaurant","getAllRestaurantName","hide","error","console","log","map","item","width","height","margin","backgroundColor","textAlign","display","details","split","join","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport Form from \"react-validation/build/form\";\nimport { Upload } from 'antd';\nimport DataService from \"../services/data.service\"\nimport Toast from 'light-toast';\n\nconst IMG_URL = \"http://localhost:8080/image?name=\"\n\nconst { Dragger } = Upload;\n\nconst required = (value) => {\n    if (!value) {\n      return (\n        <div className=\"alert alert-danger\" role=\"alert\">\n          This field is required!\n        </div>\n      );\n    }\n  };\n\nconst BoardAdmin = () => {\n    const [restaurantsNamesData, setRestaurantsNamesData] = useState(\"\")\n    const [restaurantContent, setRestaurantContent] = useState(\"\")\n    const [loading, setLoading] = useState(false);\n    const form = useRef();\n    const checkBtn = useRef();\n\n    const props = {\n        name: 'photo',\n        multiple: false,\n        action: 'http://localhost:8080/photo',\n        onChange(info) {\n            const { status } = info.file;\n\n            if (status === 'done') {\n                Toast.success(`${info.file.name} file uploaded successfully.`, 2000);\n                setRestaurantContent({\n                    ...restaurantContent,\n                    mainPicture : info.file.name\n                }) \n            } else if (status === 'error') {\n                Toast.fail(`${info.file.name} file upload failed.`, 2000);\n            }\n        },\n    };\n\n    const getRestaurantContent = (name) =>{\n        DataService.getRestaurantContent(name).then(\n            (response) => {\n                setRestaurantContent(response.data)\n            }\n        )\n    }\n\n    const onChangeName = (e) => {\n        const name = e.target.value;\n        setRestaurantContent({\n            ...restaurantContent,\n            name: name\n        })\n      };\n\n    const onChangeType = (e) => {\n        const type = e.target.value;\n        setRestaurantContent({\n            ...restaurantContent,\n            type: type\n        })\n    };\n\n    const onChangeAdress = (e) => {\n        const adress = e.target.value;\n        setRestaurantContent({\n            ...restaurantContent,\n            adress: adress\n        })\n    };\n\n    const onChangeTown = (e) => {\n        const town = e.target.value;\n        setRestaurantContent({\n            ...restaurantContent,\n            town: town\n        })\n    };\n\n    const onChangePrice = (e) => {\n        const price = e.target.value;\n        setRestaurantContent({\n            ...restaurantContent,\n            price: price\n        })\n    };\n\n    const handleModify = (e) => {\n        e.preventDefault();\n\n        setLoading(true);\n\n        form.current.validateAll();\n\n        if (checkBtn.current.context._errors.length === 0) {\n            Toast.loading(\"Loading...\");\n            DataService.updateRestaurant(restaurantContent).then(\n                () => {\n                    DataService.getAllRestaurantName().then(\n                        (response) => {\n                            setRestaurantsNamesData(response.data)\n                    })\n                    setLoading(false);\n                    Toast.hide();\n                    Toast.success(\"Success !\", 2000);\n                  },\n                  (error) => {\n                        console.log(error.response)\n                        setLoading(false);\n                  }\n            )\n        }else{\n            Toast.hide();\n            setLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        DataService.getAllRestaurantName().then(\n            (response) => {\n                setRestaurantsNamesData(response.data)\n        })\n    },[]);\n    \n\n    return (\n            <div className=\"board-admin-container\">\n                <div className=\"board-admin-restaurant-list\">\n                    <div className=\"board-admin-restaurant-title\">\n                        <h3>Restaurants</h3>\n                    </div>\n                    <div>\n                        {restaurantsNamesData &&\n                            restaurantsNamesData.map(function(item){\n                            return (\n                                    <div className=\"board-admin-restaurant-list-content\" key={item.name}>\n                                        <p onClick={() => getRestaurantContent(item.name)}>{item.name}</p>\n                                    </div>          \n                                    )\n                            })\n                        }\n                    </div>\n                </div>\n                <div className=\"board-admin-restaurant-content\">\n                    {restaurantContent &&\n                        <>\n                            <div className=\"board-admin-restaurant-content-modify\">\n                            <Form className=\"modal-form\" ref={form} onSubmit={handleModify}>\n                                <Dragger {...props}>\n                                    <div style={{width: '80%', height: '100px', margin:'auto', backgroundColor:'lightgray'}}>\n                                        <p className=\"ant-upload-text\" style={{textAlign: 'center'}}>Click or drag image to this area to upload</p>\n                                    </div>\n                                </Dragger>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"name\">Name</label>\n                                    <Input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    name=\"name\"\n                                    value={restaurantContent.name}\n                                    onChange={onChangeName}\n                                    validations={[required]}\n                                    />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"type\">Type</label>\n                                    <Input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    name=\"type\"\n                                    value={restaurantContent.type}\n                                    onChange={onChangeType}\n                                    validations={[required]}\n                                    />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"adress\">Adress</label>\n                                    <Input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    name=\"adress\"\n                                    value={restaurantContent.adress}\n                                    onChange={onChangeAdress}\n                                    validations={[required]}\n                                    />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"town\">Town</label>\n                                    <Input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    name=\"town\"\n                                    value={restaurantContent.town}\n                                    onChange={onChangeTown}\n                                    validations={[required]}\n                                    />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"price\">Price</label>\n                                    <Input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    name=\"price\"\n                                    value={restaurantContent.price}\n                                    onChange={onChangePrice}\n                                    validations={[required]}\n                                    />\n                                </div>\n\n                                <div className=\"form-group\">\n                                    <button className=\"btn btn-primary btn-block\" disabled={loading}>\n                                    {loading && (\n                                        <span className=\"spinner-border spinner-border-sm\"></span>\n                                    )}\n                                    <span>Confirm changes</span>\n                                    </button>\n                                </div>\n                                <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n                            </Form>\n                        </div>\n                            <div className=\"board-admin-restaurant-content-preview\">\n                                <div className=\"modal-restaurant-img\">\n                                    <img src={IMG_URL + restaurantContent.mainPicture} alt={restaurantContent.name}/>\n                                </div>\n                                <div className=\"board-admin-restaurant-wrapper-preview\">\n                                    <div className=\"modal-restaurant-name-category\">\n                                        <h4>{restaurantContent.name}</h4>\n                                        <p>{restaurantContent.type}</p>\n                                    </div>\n                                    <div className=\"modal-restaurant-adress-town\">\n                                        <p>{restaurantContent.adress}</p>\n                                        <p>{restaurantContent.town}.</p>\n                                    </div>\n                                    <div className=\"modal-restaurant-details\">\n                                        {\n                                            restaurantContent.details.split(',').map(function(item){\n                                            return (\n                                                    <div className=\"modal-restaurant-details-icons\" key={item}>\n                                                        <div className=\"modal-restaurant-details-icons-wrapper\" id={item === \"France\" ? \"country\" : null } >\n                                                        <img src={`${IMG_URL + item.split(' ').join('_').toLowerCase()}.svg`} alt={item}/>\n                                                        </div>\n                                                        <p>{item}</p>\n                                                    </div>          \n                                                    )\n                                            })\n                                        }\n                                        <div className=\"modal-restaurant-details-icons\">\n                                            <div className=\"modal-restaurant-details-icons-wrapper\">\n                                                <img src={restaurantContent.price <= 15 ? IMG_URL + \"smallprice.svg\" : IMG_URL + \"midprice.svg\"} alt={restaurantContent.price}/>\n                                            </div>\n                                            {restaurantContent.price <= 15 ? <p>Moins de 15€</p> : <p>Entre 30€ et 50€</p>}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                         </>   \n                    }\n                </div>\n            </div>\n    )\n}\n\nexport default BoardAdmin;"]},"metadata":{},"sourceType":"module"}